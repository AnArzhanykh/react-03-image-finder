{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.scss","components/Modal/Modal.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Button/Button.module.scss","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Modal/Modal.js","components/Loader/Loader.js","servises/new-api.js","App.js","index.js","components/Searchbar/Searchbar.module.scss"],"names":["module","exports","ImageGalleryItem","webformatURL","tags","largeImageURL","onClick","className","styles","src","alt","ImageGalleryItem__image","ImageGallery","hits","ListItem","togleModal","map","id","Searchbar","state","query","sendQuery","e","preventDefault","props","onSubmit","setState","handlerChanged","currentTarget","value","SearchForm","type","SearchForm__button","this","SearchForm__button__label","SearchForm__input","autocomplete","autofocus","placeholder","onChange","Component","Button","Modal","handlekeyDown","closeModal","code","handlBackdropClick","event","target","window","addEventListener","removeEventListener","img","Overlay","Spiner","color","height","width","searchQuery","currentPage","pageSize","url","axios","get","then","response","data","App","isLoading","renderButton","error","showModal","OpenModal","autoScrollDown","scrollTo","top","document","documentElement","scrollHeight","behavior","onChangeQuery","fetchImages","options","newApi","totalHits","needLoadMore","prevState","catch","finally","prevProps","shouldRenderloadMoreButton","length","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ac1c78ff.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2Trnj\",\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__1lEeG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3No31\",\"Modal\":\"Modal_Modal__2cWW8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2dm-D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__5Vgq8\"};","import styles from './ImageGalleryItem.module.scss'\r\n\r\nconst ImageGalleryItem = ({webformatURL, tags, largeImageURL, onClick})=> {\r\n    return(\r\n        <li className={styles.ImageGalleryItem}>\r\n            <img src={webformatURL}  alt={tags} className={styles.ImageGalleryItem__image} onClick={()=>onClick(largeImageURL)}/>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default ImageGalleryItem;","import ImageGalleryItem from '../ImageGalleryItem'\r\nimport styles from './ImageGallery.module.scss'\r\n\r\nconst ImageGallery = ( {hits, onClick, togleModal} )=>{\r\n    const ListItem = hits.map(({id, webformatURL, largeImageURL, tags})=> <ImageGalleryItem key ={id} webformatURL={webformatURL} largeImageURL={largeImageURL}tags={tags} onClick={onClick}/>)\r\n    return(\r\n            <ul className={styles.ImageGallery}>\r\n                {ListItem}\r\n            </ul>\r\n    )\r\n}\r\n\r\nexport default ImageGallery;","import {Component} from 'react';\r\nimport styles from './Searchbar.module.scss'\r\nimport axios from 'axios'\r\n\r\nclass Searchbar extends Component {\r\n\r\n    state ={\r\n        query: '',\r\n    }\r\n\r\n    sendQuery = (e)=>{\r\n        e.preventDefault();\r\n        this.props.onSubmit(this.state.query)\r\n        this.setState({query: ''})\r\n    }\r\n\r\n    handlerChanged = (e)=>{\r\n        this.setState({query: e.currentTarget.value});\r\n    }\r\n\r\n    \r\n    render(){\r\n        return(\r\n            <header className={styles.Searchbar}>\r\n                <form className={styles.SearchForm}>\r\n                    <button type=\"submit\" className={styles.SearchForm__button} onClick={this.sendQuery}>\r\n                        <span className={styles.SearchForm__button__label}>Search</span>\r\n                    </button>\r\n\r\n                    <input\r\n                        className={styles.SearchForm__input}\r\n                        type=\"text\"\r\n                        autocomplete=\"off\"\r\n                        value={this.state.query}\r\n                        autofocus\r\n                        placeholder=\"Search images and photos\"\r\n                        onChange={this.handlerChanged}\r\n                    />\r\n                </form>\r\n\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Searchbar;","import styles from './Button.module.scss'\r\n\r\n\r\n\r\nconst Button =(props)=>{\r\n    const {onClick} = props;\r\n    return(\r\n        <button type='submit' id =\"loader\"className = {styles.Button} onClick={onClick}>Load more</button>\r\n    )\r\n}\r\n\r\nexport default Button;","import styles from './Modal.module.scss'\r\nimport {Component} from 'react';\r\n\r\n// const Modal =({img, closeModal}) =>{\r\n//     return(\r\n//         <div className={styles.Overlay} onClick={closeModal}>\r\n//             <div className={styles.Modal}>\r\n//                 <img src={img} alt=\"\" />\r\n//             </div>\r\n//         </div>\r\n//     )\r\n// }\r\n\r\n// export default Modal;\r\n\r\nclass Modal extends Component {\r\n\r\n\r\n    componentDidMount(){\r\n    window.addEventListener('keydown',this.handlekeyDown)\r\n    }\r\n\r\n    componentWillUnmount(){\r\n    window.removeEventListener('keydown',this.handlekeyDown)\r\n    }\r\n\r\n    handlekeyDown = e=>{\r\n        const {closeModal} = this.props;\r\n        if(e.code === 'Escape'){\r\n            closeModal()\r\n        }\r\n    }\r\n\r\n    handlBackdropClick =event=>{\r\n        const {closeModal} = this.props;\r\n        if(event.currentTarget === event.target){                \r\n           closeModal()\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const {img} = this.props;\r\n        return(\r\n            <div className={styles.Overlay} onClick={this.handlBackdropClick}>\r\n                <div className={styles.Modal} >\r\n                    <img src={img} alt=\"\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Modal;","import Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nconst Spiner = ()=><Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80}/> \r\n\r\nexport default Spiner;","import axios from \"axios\";\r\n\r\nconst AUTH_TOKEN = `21709969-2aaf655592c1caf292dc08cd8`;\r\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\r\n\r\nconst fetchImage = ({searchQuery = '', currentPage = 1, pageSize = 12})=>{\r\n    const url=`https://pixabay.com/api/?q=${searchQuery}&page=${currentPage}&key=${AUTH_TOKEN}&image_type=photo&orientation=horizontal&per_page=${pageSize}` \r\n    return(\r\n\r\n        \r\n        axios.get(url).then(response=> response.data)\r\n    )\r\n}\r\n\r\nexport default {fetchImage};","import \"./App.scss\";\r\nimport {Component} from 'react';\r\nimport ImageGallery from './components/ImageGallery'\r\nimport Searchbar from './components/Searchbar'\r\nimport Button from './components/Button'\r\nimport Modal from './components/Modal'\r\nimport Loader from './components/Loader'\r\nimport newApi from './servises/new-api.js'\r\n\r\n\r\nclass App extends Component {\r\n\r\n  state ={\r\n      hits: [],\r\n      currentPage: 1,\r\n      pageSize: 100,\r\n      searchQuery: '',\r\n      isLoading: false,\r\n      renderButton: false,\r\n      error: null,\r\n      showModal: false,\r\n      largeImageURL: '',\r\n  }\r\n\r\n\r\n  // componentDidMount(){\r\n  //   window.addEventListener('keydown',this.handlekeyDown)\r\n  // }\r\n  // componentWillUnmount(){\r\n  //   console.log(1);\r\n  //   window.removeEventListener('keydown',this.handlekeyDown)\r\n  // }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    if(prevState.searchQuery !== this.state.searchQuery){\r\n      this.fetchImages()\r\n    }\r\n    // this.autoScrollDown()\r\n  }\r\n\r\n  // handlekeyDown = e=>{\r\n  //   if(e.code === 'Escape'){\r\n  //     this.togleModal()\r\n  //   }\r\n  // }\r\n\r\n  togleModal =()=> {\r\n    this.setState(({showModal})=>({showModal: !showModal}))\r\n  }\r\n\r\n  OpenModal =(e) =>{\r\n    this.setState({largeImageURL: e});\r\n    this.togleModal()\r\n  }\r\n\r\n  // closeModal =()=>{\r\n  //   this.setState({largeImageURL: '' });\r\n  //   this.togleModal()\r\n  // }\r\n\r\n  autoScrollDown = ()=>{\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n  }\r\n\r\n  onChangeQuery = (query)=> {\r\n    this.setState({searchQuery: query, currentPage: 1, hits: [], error: null, renderButton: false} )\r\n\r\n  }\r\n\r\n  fetchImages =()=>{\r\n    const {searchQuery, currentPage, pageSize} = this.state\r\n    const options ={searchQuery, currentPage, pageSize}\r\n    this.setState({isLoading: true})\r\n\r\n    newApi.fetchImage(options).then(({totalHits, hits}) => {\r\n\r\n      const needLoadMore = (totalHits-pageSize*currentPage) > 0\r\n      \r\n      if(needLoadMore) {\r\n        this.setState(({renderButton})=>({renderButton: !renderButton}))\r\n      }\r\n      if(!needLoadMore) {\r\n        this.setState(({renderButton})=>({renderButton: !renderButton}))\r\n      }\r\n\r\n      this.setState(prevState =>({\r\n        hits: [...prevState.hits, ...hits],\r\n        currentPage: prevState.currentPage + 1,\r\n      }));\r\n      this.autoScrollDown();\r\n    }).catch(error=>this.setState({error}))\r\n    .finally(()=>this.setState({isLoading: false}))\r\n}\r\n\r\n\r\n\r\n  render(){\r\n    const {hits, isLoading, error, showModal, largeImageURL, renderButton} =this.state;\r\n    const shouldRenderloadMoreItem = (hits.length > 0) && !isLoading;\r\n    const shouldRenderloadMoreButton = renderButton && (hits.length > 11);\r\n    // if(renderButton){\r\n    //    shouldRenderloadMoreButton = !isLoading || (hits.length > 11);\r\n    // }\r\n    \r\n    // console.log(shouldRenderloadMoreItem);\r\n    // console.log(shouldRenderloadMoreButton);\r\n\r\n      return(\r\n        <>\r\n          {error && <h1>Error, try more</h1>}\r\n          <Searchbar onSubmit={this.onChangeQuery}/>\r\n          {isLoading &&  <Loader />}\r\n          {(hits.length > 0) && (<ImageGallery hits={hits} onClick={this.OpenModal} />)}\r\n          {/* {shouldRenderloadMoreButton && (<Button onClick={this.fetchImages}/>)} */}\r\n          {/* {showModal && <Modal img={largeImageURL} closeModal={this.togleModal}/>} */}\r\n          {(showModal && <Modal img={largeImageURL} closeModal={this.togleModal}/>) || (shouldRenderloadMoreButton && (<Button onClick={this.fetchImages}/>))}\r\n        </>\r\n      )\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.scss\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1U2Os\",\"SearchForm\":\"Searchbar_SearchForm__zFWEO\",\"SearchForm__button\":\"Searchbar_SearchForm__button__2nxU6\",\"SearchForm__button__label\":\"Searchbar_SearchForm__button__label__2Ity1\",\"SearchForm__input\":\"Searchbar_SearchForm__input__gT6d7\"};"],"sourceRoot":""}